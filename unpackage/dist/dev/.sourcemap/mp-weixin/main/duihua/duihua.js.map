{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/lo/Documents/HBuilderProjects/【全新升级】火爆全网的OpenAI ChatGPT 智能对话、问答、聊天机器人/main/duihua/duihua.vue?47c5","webpack:///C:/Users/lo/Documents/HBuilderProjects/【全新升级】火爆全网的OpenAI ChatGPT 智能对话、问答、聊天机器人/main/duihua/duihua.vue?c09a","webpack:///C:/Users/lo/Documents/HBuilderProjects/【全新升级】火爆全网的OpenAI ChatGPT 智能对话、问答、聊天机器人/main/duihua/duihua.vue?9068","webpack:///C:/Users/lo/Documents/HBuilderProjects/【全新升级】火爆全网的OpenAI ChatGPT 智能对话、问答、聊天机器人/main/duihua/duihua.vue?0f1c","uni-app:///main/duihua/duihua.vue","webpack:///C:/Users/lo/Documents/HBuilderProjects/【全新升级】火爆全网的OpenAI ChatGPT 智能对话、问答、聊天机器人/main/duihua/duihua.vue?225d","webpack:///C:/Users/lo/Documents/HBuilderProjects/【全新升级】火爆全网的OpenAI ChatGPT 智能对话、问答、聊天机器人/main/duihua/duihua.vue?9cbd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","models","wxLogin","data","picshow","isvalue","columns","channel","label","isSign","signShow","signTitle","signIntegral","inviteIntegral","adIntegral","chatIntegral","loginShow","talkList","content","downShow","downTitle","show","onLoad","that","uni","title","onShareAppMessage","imageUrl","path","onShareTimeline","mounted","methods","getConfig","uniCloud","name","appcode","config","signClick","icon","duration","mask","sign","recordClick","url","modelSave","getUser","dbName","id","detail","getSign","startTime","endTime","query","adClick","videoAd","console","adLoad","adUnitId","userIntegral","userId","getUserInfo","desc","success","fail","submitLogin","avatar","res","wxlogin","provider","wxloginres","mptype","code","authorize","getLoginShow","handlepicopen","handlepiccancel","handlepicconfirm","close","handleopen","handleCopy","getHistoryMsg","type","state","get","setPageScrollTo","view","scrollTop","send","integral","messages","role"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACmN;AACnN,gBAAgB,0NAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,aAAa,kLAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/EA;AAAA;AAAA;AAAA;AAAs0B,CAAgB,i1BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkG11B;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAGA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC,UACA;QACAC;QACAC;MACA;QACAD;QACAC;MACA;QACAD;QACAC;MACA,GACA;MACAD;MACA;MACAE;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cACAC;gBACAC;cACA;cACAF;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAG;IACA;MACAD;MACAE;MACAC;IACA;EACA;EACAC;IACA;MACAJ;MACAE;MACAC;IACA;EACA;EACAE;IAAA;IACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAT;gBAAA;gBAAA,OACAU;kBACAC;kBACA/B;oBACAgC;oBACA;kBACA;gBACA;cAAA;gBANAC;gBAOA;kBACAb;kBACAA;kBACAA;kBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAc;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAd;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAA;gBAAA;cAAA;gBAAA,KAGAA;kBAAA;kBAAA;gBAAA;gBACAC;kBACAc;kBACAb;kBACAc;gBACA;gBAAA;cAAA;gBAIAf;kBACAgB;kBACAf;gBACA;gBAAA;gBAAA,OACAQ;kBACAC;kBACA/B;oBACAgC;oBACA;kBACA;gBACA;cAAA;gBANAM;gBAOAjB;gBACA;kBACAD;kBACAA;kBACAA;kBACAA;gBACA;kBACAC;oBACAc;oBACAE;oBACAf;oBACAc;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAG;MACA;QACA;QACA;MACA;MACAlB;QACAmB;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAtB;gBAAA;gBAAA,OACAU;kBACAC;kBACA/B;oBACA2C;oBACAC;kBACA;gBACA;cAAA;gBANAC;gBAOAzB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA0B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA1B;gBACA2B;gBACAC;gBAAA;gBAAA,OACAlB;kBACAC;kBACA/B;oBACA2C;oBACA;oBACA;oBACA;kBACA;gBACA;cAAA;gBARAM;gBASA,kDACA7B;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA8B;MACA;MACA;QACA9B;QACA;MACA;MACAC;QACAC;MACA;MACA;QACA6B;UACA9B;QACA;UACA;UACA8B;YACA9B;YACA8B;UACA;YACA9B;YACAA;cACAc;cACAb;cACAc;YACA;YACAgB;UACA;QACA;MACA;QACAhC;QACA+B;UACA9B;QACA;UACA;UACA8B;YACA9B;YACA8B;UACA;YACA9B;YACAA;cACAc;cACAb;cACAc;YACA;YACAgB;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;;QAOAF;UACAG;QACA;;QAEA;QACAH;UACA;UACA9B;UACAA;YACAc;YACAb;YACAc;UACA;UACAgB;QACA;QACA;QACAD;UACA9B;UACA;YACA;YACAD;YACA;cACAA;YACA;UACA;YACA;YACAC;cACAc;cACAb;cACAc;YACA;YACAgB;UACA;QACA;MACA;IACA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAnC;gBACAC;kBACAgB;kBACAf;gBACA;gBAAA;gBAAA,OACAQ;kBACAC;kBACA/B;oBACAgC;oBACAwB;kBACA;gBACA;cAAA;gBANAxD;gBAOAqB;gBACA;kBACAD;kBACAA;kBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAGA;IACAqC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACApC;kBACAC;gBACA;gBACAF;gBAAA;gBAAA,OACAC;kBACAqC;kBACAC;oBACAvC;oBACAA;oBACA;oBACAA;kBACA;kBACAwC;oBACAvC;sBACAc;sBACAb;sBACAc;oBACA;kBACA;gBACA;cAAA;gBACAf;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAwC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAzC;gBACAA;gBACAA;gBACAC;kBACAC;gBACA;gBAAA;gBAAA,OACAQ;kBACAC;kBACA/B;oBACAwD;oBACAzB;oBACA+B;kBACA;gBACA;cAAA;gBAPAC;gBAQA1C;gBACA;kBACAD;kBACAC;oBACAc;oBACAb;oBACAc;kBACA;gBACA;kBACAf;oBACAc;oBACAb;oBACAc;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA4B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA5C;gBACAC;kBACAC;gBACA;gBACAD;kBACA4C;kBACAN;oBACA;oBACAvC;kBACA;kBACAwC;oBACAvC;oBACAA;sBACAc;sBACAb;sBACAc;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACA8B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA9C;gBAEAoC;gBAIAW;gBAAA;gBAAA,OAMArC;kBACAC;kBACA/B;oBACAgC;oBACAD;oBACA+B;oBACAK;oBACAC;oBACAZ;kBACA;gBACA;cAAA;gBAVAa;gBAAA,KAWAA;kBAAA;kBAAA;gBAAA;gBACAjD;gBACAA;gBAAA;gBAAA,OACAA;cAAA;gBACAC;kBACAc;kBACAE;kBACAf;kBACAc;gBACA;gBAEA;kBACAhB;kBACAA;gBACA;gBAIAC;gBAAA;gBAAA;cAAA;gBAEAA;kBACAc;kBACAE;kBACAf;kBACAc;gBACA;cAAA;gBAEAf;gBACAD;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAkD;MACA;MACAlD;IACA;IAEAmD;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACApD;QACAC;MACA;IACA;IACAoD;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACAvD;QACArB;QACA2D;MACA;IACA;IACA;IACAkB;MAAA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBACA7E;oBACAe,29BACA;oBAAA;oBACA+D;oBAAA;oBACAC;kBACA,IACA;kBACA;kBACA;kBACA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA,gBAZAC;UAAA;QAAA;MAAA,GAYA;MACAA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACAC;UACA7D;YACA8D;YAAA;YACA/C;UACA;QACA;MACA;IACA;IACA;IACAgD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAhE;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAA;gBAAA;cAAA;gBAAA,IAGAA;kBAAA;kBAAA;gBAAA;gBACAC;kBACAC;kBACAa;gBACA;gBAAA;cAAA;gBAAA,MAGA;kBAAA;kBAAA;gBAAA;gBACAkD;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACA;gBAAA;cAAA;gBAIAjE;kBACAL;kBAAA;kBACA+D;kBAAA;kBACAC;gBACA;gBACA3D;kBACAL;kBAAA;kBACA+D;kBAAA;kBACAC;gBACA;gBACA;gBACA;gBACA;gBACAO;kBACA;gBACA;gBACAA;kBACA;oBACAvE;oBACAwE;kBACA;gBACA;gBACAnE;gBAAA;gBAAA,OACAU;kBACAC;kBACA/B;oBACAsF;oBACAlF;oBACA4B;oBACAwB;kBACA;gBACA;cAAA;gBARAO;gBASA;kBACA3C;kBACAA;oBACAL;oBAAA;oBACA+D;oBAAA;oBACAC;kBACA;kBACA;kBACA;kBACA;gBACA;kBACA1D;oBACAC;oBACAa;kBACA;kBACAf;kBACAA;oBACAL;oBAAA;oBACA+D;oBAAA;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACppBA;AAAA;AAAA;AAAA;AAAyiD,CAAgB,o/CAAG,EAAC,C;;;;;;;;;;;ACA7jD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"main/duihua/duihua.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './main/duihua/duihua.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./duihua.vue?vue&type=template&id=28858d27&\"\nvar renderjs\nimport script from \"./duihua.vue?vue&type=script&lang=js&\"\nexport * from \"./duihua.vue?vue&type=script&lang=js&\"\nimport style0 from \"./duihua.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"main/duihua/duihua.vue\"\nexport default component.exports","export * from \"-!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./duihua.vue?vue&type=template&id=28858d27&\"","var components\ntry {\n  components = {\n    uNoticeBar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n    uLoadingIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-loading-icon/u-loading-icon\" */ \"@/uview-ui/components/u-loading-icon/u-loading-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uCell: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-cell/u-cell\" */ \"@/uview-ui/components/u-cell/u-cell.vue\"\n      )\n    },\n    uLine: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-line/u-line\" */ \"@/uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uPicker: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-picker/u-picker\" */ \"@/uview-ui/components/u-picker/u-picker.vue\"\n      )\n    },\n    wxLogin: function () {\n      return import(\n        /* webpackChunkName: \"components/wxLogin/wxLogin\" */ \"@/components/wxLogin/wxLogin.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.downShow = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.loginShow = false\n    }\n    _vm.e2 = function ($event) {\n      _vm.signShow = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./duihua.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./duihua.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<u-notice-bar bgColor='#7966ff' color=\"#fff\" text=\"由于服务人数过多,如果出现异常建议退出重新尝试,AI对话已支持上下文连续对话欢迎体验\" mode=\"closable\">\r\n\t\t</u-notice-bar>\r\n\t\t<view class=\"box-1\" id=\"list-box\">\r\n\t\t\t<view class=\"talk-list\">\r\n\t\t\t\t<view v-for=\"(item,index) in talkList\" @click=\"handleCopy(item.content)\" :key=\"index\"\r\n\t\t\t\t\t:id=\"`msg-${index}`\">\r\n\t\t\t\t\t<view class=\"item flex_col\" :class=\" item.type == 1 ? 'push':'pull' \">\r\n\t\t\t\t\t\t<image v-if=\"item.type == 1\" :src=\"vuex_user?vuex_user.avatar:'/static/avatar.png'\" mode=\"aspectFill\" class=\"pic\"></image>\r\n\t\t\t\t\t\t<image v-else src=\"/static/logo.png\" mode=\"aspectFill\" class=\"pic\"></image>\r\n\t\t\t\t\t\t<view v-if=\"item.content\" class=\"content\">{{item.content}}</view>\r\n\t\t\t\t\t\t<view v-else class=\"content\"><u-loading-icon></u-loading-icon></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"box-2\">\r\n\t\t\t<view class=\"flex_col\">\r\n\t\t\t\t<view @click=\"handleopen\">\r\n\t\t\t\t\t<image class=\"avatar\" :src=\"vuex_user?vuex_user.avatar:'/static/avatar.png'\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_grow\">\r\n\t\t\t\t\t<input type=\"text\" class=\"content\" v-model=\"content\" placeholder=\"请输入聊天内容\"\r\n\t\t\t\t\t\tplaceholder-style=\"color:#DDD;\" :cursor-spacing=\"6\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"send\" @tap=\"send\">发送</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-popup :show=\"show\" :round=\"10\" mode=\"bottom\" @close=\"close\" closeable>\r\n\t\t\t<view class=\"UPOP\">\r\n\t\t\t\t<view class=\"title \">我的</view>\r\n\t\t\t\t<view class=\"margin\">\r\n\t\t\t\t\t<view class=\"userInfo-box\">\r\n\t\t\t\t\t\t<view class=\"userInfo\" @click=\"recordClick\">\r\n\t\t\t\t\t\t\t<image class=\"avatar\" :src=\"vuex_user?vuex_user.avatar:'/static/avatar.png'\"></image>\r\n\t\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t\t<view class=\"name \">{{vuex_user?vuex_user.name:'登录/注册'}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"award u-light-color\">剩余<text class=\"span \">{{vuex_user?vuex_user.integral:0}}</text>积分</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<u-cell isLink :border=\"false\" title=\"智撩AI机器人-\" :value=\"isvalue\" clickable @click=\"handlepicopen\"></u-cell>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"stat \">\r\n\t\t\t\t\t\t<view class=\"have \">{{'每次对话消耗：'+chatIntegral+'积分'}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"videoAd\">\r\n\t\t\t\t\t\t<view class=\"info \">\r\n\t\t\t\t\t\t\t<view class=\"inviteTitle \">每日签到获取积分</view>\r\n\t\t\t\t\t\t\t<view class=\"award \">奖励<text class=\"span \">{{signIntegral}}</text>积分</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"btn\" @click=\"signClick\">签到</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<u-line></u-line>\r\n\t\t\t\t\t<view class=\"invite\">\r\n\t\t\t\t\t\t<view class=\"info \">\r\n\t\t\t\t\t\t\t<view class=\"inviteTitle \">邀请新的小伙伴来体验</view>\r\n\t\t\t\t\t\t\t<view class=\"award \">奖励<text class=\"span \">{{inviteIntegral}}</text>积分/个，每天最多<text class=\"span \">{{10}}</text>人</view>\r\n\t\t\t\t\t\t\t<view class=\"hint \">提示：点击右上角<text class=\"more \">···</text>可分享朋友圈邀请</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"btn\">\r\n\t\t\t\t\t\t\t<text>邀请朋友</text>\r\n\t\t\t\t\t\t\t<button open-type=\"share\"></button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<u-line></u-line>\r\n\t\t\t\t\t<view class=\"videoAd\">\r\n\t\t\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t\t\t<view class=\"videoAdTitle \">看视频广告攒次数</view>\r\n\t\t\t\t\t\t\t<view class=\"award \">奖励<text class=\"span \">{{adIntegral}}</text>积分/次</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"btn\" @click=\"adClick\">观看视频</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<u-button open-type='contact' color=\"#7966ff\" :plain=\"true\" text=\"咨询客服(意见反馈)\"></u-button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t<u-picker :show=\"picshow\" :columns=\"columns\" keyName=\"label\" @cancel=\"handlepiccancel\" @confirm=\"handlepicconfirm\"></u-picker>\r\n\t\t<models v-if=\"downShow\" :title=\"downTitle\" :btnText=\"'看广告领 '+adIntegral+' 积分'\" :authorize=\"false\" @close=\"downShow = false\" @save=\"adClick\"></models>\r\n\t\t<models v-if=\"loginShow\"\r\n\t\t:ad=\"true\"\r\n\t\ttitle=\"为了更好的玩机体验，快去授权登录吧\"\r\n\t\tbtnText=\"授权登录\" \r\n\t\t@save=\"getUserInfo\" \r\n\t\t@close=\"loginShow = false\"></models>\r\n\t\t\r\n\t\t<models v-if=\"signShow\"\r\n\t\t:authorize=\"false\" \r\n\t\t:ad=\"true\"\r\n\t\t:title=\"signTitle\"\r\n\t\tbtnText=\"知道了\" \r\n\t\tcloseText=\" \" \r\n\t\t@save=\"signShow = false\"></models>\r\n\t\t<wxLogin @submit=\"submitLogin\"></wxLogin>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// 在页面中定义激励视频广告\r\n\tlet videoAd = null\r\n\timport models from '@/components/model/model.vue'\r\n\timport wxLogin from '@/components/wxLogin/wxLogin.vue'\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tmodels,\r\n\t\t\twxLogin\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpicshow: false,\r\n\t\t\t\tisvalue: '标准线路',\r\n\t\t\t\tcolumns: [\r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\tchannel: '',\r\n\t\t\t\t\t\tlabel: '标准线路',\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\tchannel: 1,\r\n\t\t\t\t\t\tlabel: '官方路线1',\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\tchannel: 2,\r\n\t\t\t\t\t\tlabel: '官方路线2',\r\n\t\t\t\t\t}]\r\n\t\t\t\t],\r\n\t\t\t\tchannel: '',\r\n\t\t\t\t// 签到\r\n\t\t\t\tisSign: false,\r\n\t\t\t\tsignShow: false,\r\n\t\t\t\tsignTitle: '',\r\n\t\t\t\tsignIntegral: 0,\r\n\t\t\t\tinviteIntegral: 0,\r\n\t\t\t\tadIntegral: 0,\r\n\t\t\t\tchatIntegral: 0,\r\n\t\t\t\t// 登录弹窗\r\n\t\t\t\tloginShow: false,\r\n\t\t\t\ttalkList: [],\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tdownShow: false,\r\n\t\t\t\tdownTitle: '',\r\n\t\t\t\tshow: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\tconst that = this\r\n\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\ttitle: `智撩AI机器人-${this.isvalue}`,\r\n\t\t\t})\r\n\t\t\tthat.getConfig()\r\n\t\t},\r\n\t\tonShareAppMessage(res) {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '我等风也等你，近听水无声~',\r\n\t\t\t\timageUrl: '/static/wenda.png',\r\n\t\t\t\tpath: '/pages/index/index?userId='+this.vuex_user._id\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareTimeline(res) {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '我等风也等你，近听水无声~',\r\n\t\t\t\timageUrl: '/static/wenda.png',\r\n\t\t\t\tpath: '/pages/index/index?userId='+this.vuex_user._id\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.getHistoryMsg();\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getConfig(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet config = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'config_map',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tappcode: that.appcode,\r\n\t\t\t\t\t\t'keys': ['signIntegral', 'inviteIntegral', 'adIntegral','chatIntegral']\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tif(config.result.success) {\r\n\t\t\t\t\tthat.signIntegral = parseInt(config.result.data[0])\r\n\t\t\t\t\tthat.inviteIntegral = parseInt(config.result.data[1])\r\n\t\t\t\t\tthat.adIntegral = parseInt(config.result.data[2])\r\n\t\t\t\t\tthat.chatIntegral = parseInt(config.result.data[3])\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync signClick(){\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif(!that.vuex_user){\r\n\t\t\t\t\tthat.loginShow = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(that.isSign){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '已签到',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t\ttitle: '签到中...'\r\n\t\t\t\t})\r\n\t\t\t\tlet sign = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'sign_add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tappcode: that.appcode,\r\n\t\t\t\t\t\t\"userId\": that.vuex_user._id\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tif(sign.result.success){\r\n\t\t\t\t\tthat.getUser()\r\n\t\t\t\t\tthat.signTitle = \"<p style='font-weight: 550;font-size: 16px;'>签到成功</p><p style='padding-top: 10px;'>获得<span class='num'>\"+sign.result.integral+\"</span>积分</p>\"\r\n\t\t\t\t\tthat.signShow = true\r\n\t\t\t\t\tthat.isSign = true\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\ttitle: sign.result.msg,\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trecordClick(){\r\n\t\t\t\tif(!this.vuex_user){\r\n\t\t\t\t\tthis.loginShow = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/main/integral/record'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmodelSave(){\r\n\t\t\t\tif(!this.vuex_user){\r\n\t\t\t\t\tthis.loginShow = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.modelShow = false\r\n\t\t\t},\r\n\t\t\tasync getUser(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet detail = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'query_map',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tdbName: \"wx_user\",\r\n\t\t\t\t\t\tid: that.vuex_user._id\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tthat.$u.vuex('vuex_user', detail.result)\r\n\t\t\t},\r\n\t\t\t// 我的\r\n\t\t\tasync getSign(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tconst startTime = new Date(new Date().toLocaleDateString()).getTime()\r\n\t\t\t\tconst endTime = new Date(new Date().toLocaleDateString()).getTime() + 24 * 60 * 60 * 1000 - 1\r\n\t\t\t\tlet query = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'sign_flag',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tdbName: 'wx_sign',\r\n\t\t\t\t\t\t\"userId\": that.vuex_user._id,\r\n\t\t\t\t\t\t\"startTime\": startTime,\r\n\t\t\t\t\t\t\"endTime\": endTime\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tif(query.result.success) that.isSign = true\r\n\t\t\t\telse that.isSign = false\r\n\t\t\t},\r\n\t\t\tadClick(){\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif(!that.vuex_user){\r\n\t\t\t\t\tthat.loginShow = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t  title: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tif (videoAd) {\r\n\t\t\t\t\tvideoAd.show().then(() => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t// 失败重试\r\n\t\t\t\t\t\tvideoAd.load().then(() => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tvideoAd.show()\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    icon: 'none',\r\n\t\t\t\t\t\t\t    title: '访问人数过多，请稍后再试',\r\n\t\t\t\t\t\t\t    duration: 3000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log('激励视频 广告显示失败')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthat.adLoad()\r\n\t\t\t\t\tvideoAd.show().then(() => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t// 失败重试\r\n\t\t\t\t\t\tvideoAd.load().then(() => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tvideoAd.show()\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    icon: 'none',\r\n\t\t\t\t\t\t\t    title: '访问人数过多，请稍后再试',\r\n\t\t\t\t\t\t\t    duration: 3000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log('激励视频 广告显示失败')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tadLoad(){\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif (wx.createRewardedVideoAd) {\r\n\t\t\t\t\t// 加载激励视频广告\r\n\t\t\t\t\t// #ifdef MP-QQ\r\n\t\t\t\t\tvideoAd = wx.createRewardedVideoAd({\r\n\t\t\t\t\t\tadUnitId: \"cbe2baa6cdb9b4f2c75269d000476ee6\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tvideoAd = wx.createRewardedVideoAd({\r\n\t\t\t\t\t\tadUnitId: that.wxRewardedAdIds[Math.floor(Math.random() * that.wxRewardedAdIds.length + 1) - 1]\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t//捕捉错误\r\n\t\t\t\t\tvideoAd.onError(err => {\r\n\t\t\t\t\t\t// 进行适当的提示\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t    icon: 'none',\r\n\t\t\t\t\t\t    title: '访问人数过多，请稍后再试',\r\n\t\t\t\t\t\t    duration: 3000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log('videoAd onError', err);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 监听关闭\r\n\t\t\t\t\tvideoAd.onClose(status => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif ((status && status.isEnded) || status === undefined) {\r\n\t\t\t\t\t\t\t// 正常播放结束，下发奖励\r\n\t\t\t\t\t\t\tthat.downShow = false\r\n\t\t\t\t\t\t\tif(that.vuex_user){\r\n\t\t\t\t\t\t\t\tthat.userIntegral()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 播放中途退出，进行提示\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t    icon: 'none',\r\n\t\t\t\t\t\t\t    title: '未播放完，下发奖励失败',\r\n\t\t\t\t\t\t\t    duration: 3000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log('中途退出')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync userIntegral(){\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t\ttitle: '加载中...'\r\n\t\t\t\t})\r\n\t\t\t\tlet data = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user_integral',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tappcode: that.appcode,\r\n\t\t\t\t\t\tuserId: that.vuex_user._id\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tif(data.result.success){\r\n\t\t\t\t\tthat.getUser()\r\n\t\t\t\t\tthat.signTitle = \"<p style='font-weight: 550;font-size: 16px;'>恭喜你！</p><p style='padding-top: 10px;'>获得<span class='num'>\"+data.result.integral+\"</span>积分</p>\"\r\n\t\t\t\t\tthat.signShow = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// 登录\r\n\t\t\tasync getUserInfo(){\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '授权中...'\r\n\t\t\t\t});\r\n\t\t\t\tvar that = this\r\n\t\t\t\tawait uni.getUserInfo({\r\n\t\t\t\t  desc: '更新您的个人信息',\r\n\t\t\t\t  success: (res) => {\r\n\t\t\t\t\t  that.name = res.userInfo.nickName; //昵称\r\n\t\t\t\t\t  that.avatar = res.userInfo.avatarUrl; //头像\r\n\t\t\t\t\t  // 成功后进行登录,获取code\r\n\t\t\t\t\t  that.wxlogin();\r\n\t\t\t\t  },\r\n\t\t\t\t  fail(err){\r\n\t\t\t\t\t  uni.showToast({\r\n\t\t\t\t\t  \ticon: 'none',\r\n\t\t\t\t\t  \ttitle: '授权失败',\r\n\t\t\t\t\t  \tduration: 1500\r\n\t\t\t\t\t  })\r\n\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t},\r\n\t\t\tasync submitLogin(e){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.name = e.name\r\n\t\t\t\tthat.avatar = e.avatar\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '更新中...'\r\n\t\t\t\t});\r\n\t\t\t\tlet res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user_update',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserId: that.vuex_user._id,\r\n\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\tavatar: this.avatar\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tuni.hideLoading()\t\r\n\t\t\t\tif(res.result.success){\r\n\t\t\t\t\tthat.getUser()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '更新成功!',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '更新失败',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//已经授权，自动登录\r\n\t\t\tasync wxlogin() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '登录中...'\r\n\t\t\t\t});\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\tlet code = loginRes.code;\r\n\t\t\t\t\t\tthat.wxloginres(code);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err){\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '登录失败',\r\n\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//登录后提交服务器获取进一步信息\r\n\t\t\tasync wxloginres(wxcode) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t\r\n\t\t\t\tvar userId = uni.getStorageSync('userId')\r\n\t\t\t\t\r\n\t\t\t\tvar mptype\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tmptype = 'wx'\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-QQ\r\n\t\t\t\t\tmptype = 'qq'\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\tlet authorize = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user_authorize',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tappcode:that.appcode,\r\n\t\t\t\t\t\tname: that.name,\r\n\t\t\t\t\t\tavatar: that.avatar,\r\n\t\t\t\t\t\tmptype: mptype,\r\n\t\t\t\t\t\tcode: wxcode,\r\n\t\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tif(authorize.result.success){\r\n\t\t\t\t\tthat.$u.vuex('vuex_user',authorize.result.data)\r\n\t\t\t\t\tthat.getUser()\r\n\t\t\t\t\tawait that.getSign()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\ttitle: '登录成功',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tif(!authorize.result.newUser){\r\n\t\t\t\t\t\tthat.loginShow = false\r\n\t\t\t\t\t\tthat.$u.vuex('showWxLogin',true)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tuni.removeStorageSync('userId')\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\ttitle: authorize.result.msg,\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tthat.loginShow = false\r\n\t\t\t},\r\n\t\t\tgetLoginShow(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthat.loginShow = true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\thandlepicopen() {\r\n\t\t\t\tthis.picshow = true\r\n\t\t\t\tthis.show = false\r\n\t\t\t},\r\n\t\t\thandlepiccancel() {\r\n\t\t\t\tthis.picshow = false\r\n\t\t\t},\r\n\t\t\thandlepicconfirm(data) {\r\n\t\t\t\tthis.channel = data.value[0].channel\r\n\t\t\t\tthis.picshow = false\r\n\t\t\t\tthis.isvalue = data.value[0].label\r\n\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\ttitle: `智撩AI机器人-${this.isvalue}`,\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t},\r\n\t\t\thandleopen() {\r\n\t\t\t\tthis.show = true\r\n\t\t\t},\r\n\t\t\thandleCopy(message) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.setClipboardData({\r\n\t\t\t\t\tdata: message,\r\n\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取历史消息\r\n\t\t\tgetHistoryMsg() {\r\n\t\t\t\tlet get = async () => {\r\n\t\t\t\t\tlet data = [{\r\n\t\t\t\t\t\tcontent: `智撩AI为您服务：\\n1. 知乎百度答题、做作业题目\\n2. 写代码、写文案、写论文，写小说\\n3. 文案润色、翻译、写诗作词\\n4. 扮演面试官、扮演书籍电影角色\\n例1：写一篇工作日报我是行政\\n例2：帮我写作业，题目是xxx\\n例3：把下文翻译成英文：xxx\\n例4：写一出能活的短视频剧本\\n例5：英文写物理相关的论文\\n例6：用王小波的风格写篇情书\\n\r\n或者可以问我其他问题\\n越完整的描述，我越精确`, // 消息内容\r\n\t\t\t\t\t\ttype: 0,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\r\n\t\t\t\t\t\tstate: 0\r\n\t\t\t\t\t}];\r\n\t\t\t\t\t// 将获取到的消息数据合并到消息数组中\r\n\t\t\t\t\tthis.talkList = [...data, ...this.talkList];\r\n\t\t\t\t\t// 数据挂载后执行，不懂的请自行阅读 Vue.js 文档对 Vue.nextTick 函数说明。\r\n\t\t\t\t\t// 设置当前滚动的位置\r\n\t\t\t\t\tthis.setPageScrollTo();\r\n\t\t\t\t}\r\n\t\t\t\tget();\r\n\t\t\t},\r\n\t\t\t// 设置页面滚动位置\r\n\t\t\tsetPageScrollTo() {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tconst selector = `#msg-${this.talkList.length-1}`;\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(selector);\r\n\t\t\t\t\tview.boundingClientRect((res) => {\r\n\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\tscrollTop: res.top - 30, // -30 为多显示出大半个消息的高度，示意上面还有信息。\r\n\t\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 发送信息\r\n\t\t\tasync send() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tif(!that.vuex_user){\r\n\t\t\t\t\tthat.loginShow = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!that.content) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入有效的内容',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.chatIntegral > 0){\r\n\t\t\t\t\tvar integral = this.vuex_user.integral\r\n\t\t\t\t\tif(integral < this.chatIntegral){\r\n\t\t\t\t\t\tthis.show = true\r\n\t\t\t\t\t\tthis.downShow = true\r\n\t\t\t\t\t\tthis.downTitle = \"<p style='font-weight: 550;font-size: 16px;'>提问需要 \"+this.chatIntegral+\" 积分</p><p style='padding-top: 10px;'>您当前仅有<span class='num'>\"+integral+\"</span>积分，无法发起提问，快去赚积分吧~</p>\"\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthat.talkList.push({\r\n\t\t\t\t\tcontent: that.content, // 消息内容\r\n\t\t\t\t\ttype: 1 ,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\r\n\t\t\t\t\tstate: 1,\r\n\t\t\t\t})\r\n\t\t\t\tthat.talkList.push({\r\n\t\t\t\t\tcontent: null, // 消息内容\r\n\t\t\t\t\ttype: 2 ,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\r\n\t\t\t\t\tstate: 0,\r\n\t\t\t\t})\r\n\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t// 设置当前滚动的位置\r\n\t\t\t\tthis.setPageScrollTo();\r\n\t\t\t\tlet messages = that.talkList.filter(item=>{\r\n\t\t\t\t\treturn item.state==1\r\n\t\t\t\t})\r\n\t\t\t\tmessages = messages.map(item=>{\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tcontent: item.content,\r\n\t\t\t\t\t\trole: item.type==1?'user':'assistant'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthat.content = ''\r\n\t\t\t\tlet res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'openai',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmessages:messages,\r\n\t\t\t\t\t\tchannel:that.channel,\r\n\t\t\t\t\t\tappcode:that.appcode,\r\n\t\t\t\t\t\tuserId: that.vuex_user._id\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tif(res.result.success){\r\n\t\t\t\t\tthat.getUser()\r\n\t\t\t\t\tthat.talkList[that.talkList.length-1] = {\r\n\t\t\t\t\t\tcontent: res.result.content, // 消息内容\r\n\t\t\t\t\t\ttype: 0 ,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\r\n\t\t\t\t\t\tstate: 1,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t\t// 设置当前滚动的位置\r\n\t\t\t\t\tthis.setPageScrollTo();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.result.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthat.talkList[that.talkList.length-2].state = 0\r\n\t\t\t\t\tthat.talkList[that.talkList.length-1] = {\r\n\t\t\t\t\t\tcontent: res.result.msg, // 消息内容\r\n\t\t\t\t\t\ttype: 0 ,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\r\n\t\t\t\t\t\tstate: 0,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"duihua.scss\"\r\n</style>\r\n","import mod from \"-!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./duihua.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\Downloads\\\\Google\\\\HBuilderX.3.98.2023112510\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./duihua.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1703217131208\n      var cssReload = require(\"E:/Downloads/Google/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}